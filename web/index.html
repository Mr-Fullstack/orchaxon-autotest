<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>AutoTest Gen | Free Unit Test Boilerplate Generator (WASM Powered)</title>
    <meta name="description" content="Generate robust unit test boilerplate instantly. Supports C# (xUnit), Kotlin (JUnit), TypeScript (Jest), Java, and PHP. Clean code, zero config, developer-first tool by OrchAxon Labs.">
    <meta name="keywords" content="unit test generator, tdd tool, c# xunit generator, kotlin junit boilerplate, typescript jest generator, orchaxon labs, developer tools, testing automation">
    <meta name="author" content="OrchAxon Labs">
    <meta name="robots" content="index, follow">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://autotestgen.netlify.app"> <meta property="og:title" content="AutoTest Gen | Stop writing boilerplate tests manually">
    <meta property="og:description" content="Instantly generate unit test structures for C#, Kotlin, Java, PHP & TypeScript. Save hours of setup time. Try it free.">
    <meta property="og:image" content="https://autotestgen.netlify.app/social-preview.png"> <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://autotestgen.netlify.app/"> <meta property="twitter:title" content="AutoTest Gen | Unit Test Boilerplate Generator">
    <meta property="twitter:description" content="Generate unit test structures instantly. C#, Kotlin, Java, PHP, TS & Node supported.">
    <meta property="twitter:image" content="https://autotestgen.netlify.app/social_preview.png"> <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script src="wasm_exec.js"></script>

    <style>
        body { font-family: 'Montserrat', sans-serif; background: #0f172a; color: #e2e8f0; }
        
        /* Ajustes finos para o Prism ficar bonito no seu container */
        pre[class*="language-"] { 
            background: #1e293b !important; 
            border: 1px solid #334155; 
            border-radius: 6px; 
            padding: 1rem; 
            margin: 0;
            text-shadow: none !important;
            font-family: 'Fira Code', 'Consolas', monospace !important;
            font-size: 0.875rem;
        }
        
        .tab-active { background: #1e293b; border-bottom: 2px solid #3b82f6; color: #60a5fa; }
        
        /* Badges */
        .lang-badge { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; margin-left: 0.5rem; }
        .lang-csharp { background: #512bd4; color: white; }
        
        input, select, textarea { background: #1e293b; border: 1px solid #334155; color: #e2e8f0; transition: border-color 0.2s; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #3b82f6; }
        .cli-section { background: linear-gradient(135deg, #1e1b4b 0%, #0f172a 100%); border-top: 1px solid #334155; }
        .terminal-box { background: #000; border: 1px solid #333; border-radius: 8px; padding: 1.5rem; box-shadow: 0 0 20px rgba(139, 92, 246, 0.3); }
    </style>
    
    <script src="https://orchaxonnexus.netlify.app/tracker.js" data-project="autotest-gen" id="orchaxon-tracker" async></script>
</head>
<body class="p-6 min-h-screen flex flex-col">
    <div class="max-w-7xl mx-auto w-full flex-grow">
        
        <div class="mb-8">
            <div class="flex justify-between items-end mb-4">
                <div>
                    <h1 class="text-4xl font-bold text-white mb-2 flex items-center gap-2">
                        <span class="text-purple-500">âš¡</span> AutoTest Gen 
                        <span id="wasmStatus" class="text-xs bg-slate-800 text-yellow-500 px-2 py-1 rounded border border-slate-700 font-mono animate-pulse">Loading Core...</span>
                    </h1>
                    <p class="text-slate-400">Generate unit tests like a pro. Clean, fast & secure.</p>
                </div>
                <div class="text-xs font-mono text-slate-500 hidden sm:block">v2.1 Color</div>
            </div>

            <div class="flex flex-wrap gap-2 mt-4 mb-6">
                <span class="px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs font-bold border border-blue-800">C# .NET</span>
                <span class="px-3 py-1 bg-purple-900/30 text-purple-300 rounded-full text-xs font-bold border border-purple-800">Kotlin</span>
                <span class="px-3 py-1 bg-blue-900/30 text-blue-300 rounded-full text-xs font-bold border border-blue-800">TypeScript</span>
                <span class="px-3 py-1 bg-yellow-900/30 text-yellow-300 rounded-full text-xs font-bold border border-yellow-800">Node.js</span>
                <span class="px-3 py-1 bg-green-900/30 text-green-300 rounded-full text-xs font-bold border border-green-800">Python</span>
                <span class="px-3 py-1 bg-red-900/30 text-red-300 rounded-full text-xs font-bold border border-red-800">Java</span>
                <span class="px-3 py-1 bg-cyan-900/30 text-cyan-300 rounded-full text-xs font-bold border border-cyan-800">Go</span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
            <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 shadow-xl flex flex-col h-[700px]">
                
                <div class="flex items-center border-b border-slate-700 mb-6 overflow-x-auto">
                    <button id="tabVisual" class="px-4 py-2 tab-active text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2" onclick="switchTab('visual')">
                        <span>ðŸ”¨</span> Visual Builder
                    </button>
                    <button id="tabMeta" class="px-4 py-2 text-slate-400 hover:text-white text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2" onclick="switchTab('meta')">
                        <span class="text-pink-500">ðŸ§©</span> Meta Framework (WASM)
                    </button>
                    <button onclick="openModal()" class="ml-auto px-3 py-1 text-xs bg-slate-700 hover:bg-slate-600 rounded text-blue-300 transition-colors flex items-center gap-1">
                        <span class="text-lg">ðŸ’¡</span> Guide
                    </button>
                </div>

                <div id="visualBuilder" class="flex-grow flex flex-col">
                    <div class="space-y-5">
                        <div>
                            <label class="block text-xs uppercase tracking-wider text-slate-500 font-bold mb-2">
                                Language
                                <span id="langBadge" class="lang-badge lang-csharp">C#</span>
                            </label>
                            <select id="language" class="w-full px-3 py-3 rounded-lg bg-slate-900 border-slate-700 focus:border-purple-500 cursor-pointer" onchange="updateOutput(); updateLangBadge()">
                                <option value="csharp">C# (xUnit)</option>
                                <option value="kotlin">Kotlin (JUnit)</option>
                                <option value="typescript">TypeScript (Jest)</option>
                                <option value="javascript">Node.js (Native)</option>
                                <option value="java">Java (JUnit 5)</option>
                                <option value="php">PHP (PHPUnit)</option>
                                <option value="python">Python (Unittest)</option>
                                <option value="go">Go (Testing)</option>
                            </select>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-xs uppercase tracking-wider text-slate-500 font-bold mb-2">Target Class</label>
                                <input type="text" id="className" placeholder="PaymentService" class="w-full px-3 py-2 rounded-lg bg-slate-900 border-slate-700 focus:border-purple-500 font-mono" oninput="updateOutput()">
                            </div>
                            <div>
                                <label class="block text-xs uppercase tracking-wider text-slate-500 font-bold mb-2">Target Method</label>
                                <input type="text" id="methodName" placeholder="ProcessPayment" class="w-full px-3 py-2 rounded-lg bg-slate-900 border-slate-700 focus:border-purple-500 font-mono" oninput="updateOutput()">
                            </div>
                        </div>

                        <div>
                            <label class="block text-xs uppercase tracking-wider text-slate-500 font-bold mb-2">Test Scenarios</label>
                            <div id="casesList" class="space-y-2 mb-3 max-h-[250px] overflow-y-auto"></div>
                            <button onclick="addCase()" class="w-full px-4 py-2 border border-dashed border-slate-600 hover:border-purple-500 text-slate-400 hover:text-purple-400 rounded-lg text-sm font-medium transition-colors">
                                + Add Scenario
                            </button>
                        </div>
                    </div>
                </div>

                <div id="metaBuilder" class="hidden flex-grow flex flex-col">
                    <div class="bg-indigo-900/20 border border-indigo-500/30 p-3 rounded-lg mb-4 text-xs text-indigo-200">
                        <strong>Power Mode:</strong> Processed by Go WASM Core. Plain text output is automatically highlighted.
                    </div>
                    <textarea id="metaInput" class="flex-grow w-full p-4 rounded-lg bg-slate-900 border-slate-700 focus:border-pink-500 font-mono text-xs leading-relaxed resize-none" 
                    placeholder="Paste your Meta Framework JSON here..." oninput="generateWASM()" spellcheck="false">{
  "meta": { "lang": "csharp" },
  "target": {
    "class_name": "AuthService",
    "method_name": "Login"
  },
  "dependencies": [
    { "field_name": "db", "interface_name": "IDatabase" }
  ],
  "scenarios": [
    {
      "id": "success",
      "description": "Should return token on success",
      "mocks_setup": [
        { "dependency": "db", "method": "Find", "return_value": "new User()" }
      ],
      "expectations": { "return_value": "token" }
    }
  ]
}</textarea>
                </div>
            </div>

            <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 shadow-xl flex flex-col h-[700px]">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-sm font-bold text-slate-300 uppercase tracking-wider">Generated Code</h2>
                    <div class="flex gap-2">
                        <button onclick="copyCode(this)" class="px-3 py-1.5 bg-slate-700 hover:bg-slate-600 rounded text-xs font-medium text-white transition-colors flex items-center gap-1">
                            ðŸ“‹ Copy
                        </button>
                        <button onclick="downloadCode()" class="px-3 py-1.5 bg-purple-600 hover:bg-purple-700 rounded text-xs font-medium text-white transition-colors flex items-center gap-1">
                            â¬‡ Download
                        </button>
                    </div>
                </div>
                <pre id="output" class="flex-grow overflow-y-auto font-mono text-sm text-slate-300"></pre>
            </div>
        </div>
        
           <div class="cli-section rounded-xl p-12 text-center mb-12 relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 via-blue-500 to-green-500"></div>
            <div class="max-w-3xl mx-auto relative z-10">
                <h2 class="text-3xl font-bold text-white mb-3">ðŸš€ Bring AutoTest to your terminal.</h2>
                <p class="text-slate-300 text-lg mb-8">Automate test creation without leaving VS Code using our Go CLI.</p>

                <div class="terminal-box mb-8 mx-auto max-w-xl text-left transform group-hover:scale-105 transition-transform duration-500">
                    <div class="flex items-center mb-3 border-b border-gray-800 pb-2">
                        <div class="flex gap-2">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        </div>
                        <span class="ml-4 text-xs text-slate-500 font-mono">zsh â€” 80x24</span>
                    </div>
                    <div>
                        <span class="text-green-400 font-bold">âžœ</span> <span class="text-blue-400">~</span> <span class="text-slate-300">go install github.com/Mr-Fullstack/orchaxon-autotest@latest</span><br>
                        <span class="text-slate-500">Downloading binary... 100%</span><br>
                        <br>
                        <span class="text-green-400 font-bold">âžœ</span> <span class="text-blue-400">~</span> <span class="text-slate-300">orchaxon-autotest -lang csharp -class OrderService</span><br>
                        <span class="text-purple-400">âš¡ OrchAxon AutoTest v1.0</span><br>
                        <span class="text-green-400">âœ“ Generated PaymentServiceTests.cs (0.04s)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

  <script>
        // --- 1. WASM ---
        const go = new Go();
        let wasmReady = false;
        WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
            go.run(result.instance);
            wasmReady = true;
            document.getElementById('wasmStatus').innerText = "âœ… Active";
            document.getElementById('wasmStatus').className = "text-xs bg-green-900/50 text-green-400 px-2 py-1 rounded border border-green-800 font-mono font-bold";
        });

        // --- 2. TABS ---
        let currentTab = 'visual';
        function switchTab(tab) {
            currentTab = tab;
            const btnVisual = document.getElementById('tabVisual');
            const btnMeta = document.getElementById('tabMeta');
            
            if (tab === 'visual') {
                btnVisual.classList.add('tab-active', 'text-blue-400'); btnVisual.classList.remove('text-slate-400');
                btnMeta.classList.remove('tab-active', 'text-pink-500'); btnMeta.classList.add('text-slate-400');
                document.getElementById('visualBuilder').classList.remove('hidden');
                document.getElementById('metaBuilder').classList.add('hidden');
                updateOutput(); 
            } else {
                btnMeta.classList.add('tab-active', 'text-pink-500'); btnMeta.classList.remove('text-slate-400');
                btnVisual.classList.remove('tab-active', 'text-blue-400'); btnVisual.classList.add('text-slate-400');
                document.getElementById('visualBuilder').classList.add('hidden');
                document.getElementById('metaBuilder').classList.remove('hidden');
                generateWASM(); 
            }
        }

        // --- 3. HELPER: SYNTAX HIGHLIGHTER (PRISM.JS) ---
        function highlightCode(code, lang) {
            // Mapa de nomes do seu select para nomes do Prism
            const map = {
                'csharp': 'csharp',
                'kotlin': 'kotlin',
                'typescript': 'typescript',
                'java': 'java',
                'go': 'go',
                'python': 'python',
                'php': 'php',
                'node': 'javascript',
                'javascript': 'javascript'
            };
            
            const prismLang = map[lang] || 'clike';
            
            // 1. Escapa HTML bÃ¡sico para nÃ£o quebrar
            const escapedCode = code.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            
            // 2. Cria a estrutura que o Prism precisa
            const html = `<code class="language-${prismLang}">${escapedCode}</code>`;
            
            // 3. Retorna o HTML. O Prism.highlightAll() vai colorir depois.
            return html;
        }

        // FunÃ§Ã£o para forÃ§ar o Prism a repintar o cÃ³digo inserido dinamicamente
        function reHighlight() {
            const output = document.getElementById('output');
            // Remove formataÃ§Ã£o anterior do Prism para evitar duplicaÃ§Ã£o
            output.className = 'flex-grow overflow-y-auto font-mono text-sm';
            Prism.highlightAllUnder(output);
        }

        // --- 4. META GENERATOR (WASM) ---
        function generateWASM() {
            if (!wasmReady) return;
            const input = document.getElementById('metaInput').value;
            const output = document.getElementById('output');
            
            try {
                // Pega a linguagem do JSON para colorir certo
                const meta = JSON.parse(input);
                const lang = meta.meta?.lang || 'csharp';
                
                const plainText = GenerateTestCode(input);
                output.innerHTML = highlightCode(plainText, lang);
                reHighlight();
            } catch (e) {
                // Se o JSON for invÃ¡lido, mostra texto puro sem quebrar
                output.textContent = "// Waiting for valid JSON...\n// " + e.message;
            }
        }

        // --- 5. VISUAL GENERATOR (Manual) ---
        let testCases = [{ id: 1, text: 'Should return success' }];
        
        function addCase(text = '') { testCases.push({ id: Date.now(), text }); renderCases(); updateOutput(); }
        function removeCase(id) { testCases = testCases.filter(c => c.id !== id); renderCases(); updateOutput(); }
        function updateCase(id, text) { const c = testCases.find(c => c.id === id); if (c) { c.text = text; updateOutput(); } }
        
        function renderCases() {
            document.getElementById('casesList').innerHTML = testCases.map(c => `
                <div class="case-item flex gap-2 group">
                    <input type="text" value="${c.text}" oninput="updateCase(${c.id}, this.value)" class="flex-1 px-3 py-2 rounded bg-slate-900 border border-slate-700 text-sm font-mono text-white">
                    <button onclick="removeCase(${c.id})" class="px-3 py-2 text-slate-500 hover:text-red-400">âœ•</button>
                </div>
            `).join('');
        }

        // Helpers de Texto
        function toPascal(s) { return s.replace(/[^a-zA-Z0-9]/g, ' ').split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(''); }
        function toCamel(s) { const p = toPascal(s); return p.charAt(0).toLowerCase() + p.slice(1); }
        function toSnake(s) { return s.replace(/[^a-zA-Z0-9]/g, '_').toLowerCase(); }

        // Geradores Manuais (Texto Puro)
        function generateJavaScript(c, m, cases) {
          return `import { describe, it } from 'node:test';\nimport assert from 'node:assert';\n\ndescribe('${c}', () => {\n    describe('${m}', () => {\n${cases.map(i=>`        it('${i.text}', () => {\n            // Arrange\n            const sut = new ${c}();\n            // Act\n            // Assert\n            assert.ok(true);\n        });`).join('\n')}\n    });\n});`;
        } 
        function generateCSharp(c, m, cases) {
            return `using Xunit;\n\npublic class ${c}Tests {\n${cases.map(i=>`    [Fact]\n    public void ${m}_${toPascal(i.text)}() {\n        // Arrange\n        var sut = new ${c}();\n        // Act\n        // Assert\n    }`).join('\n\n')}\n}`;
        }
        function generateKotlin(c, m, cases) {
             return `import org.junit.Test\n\nclass ${c}Test {\n${cases.map(i=>`    @Test\n    fun \`${m} ${i.text}\`() {\n        // Arrange\n        val sut = ${c}()\n        // Act\n        // Assert\n    }`).join('\n\n')}\n}`;
        }
        function generateTypeScript(c, m, cases) {
            return `describe('${c}', () => {\n    describe('${m}', () => {\n${cases.map(i=>`        it('${i.text}', () => {\n            // Arrange\n            const sut = new ${c}();\n            // Act\n            // Assert\n        });`).join('\n')}\n    });\n});`;
        }
        function generateJava(c, m, cases) {
            return `import org.junit.jupiter.api.Test;\n\nclass ${c}Test {\n${cases.map(i=>`    @Test\n    void ${toCamel(m)}_${toPascal(i.text)}() {\n        // Arrange\n        var sut = new ${c}();\n        // Act\n        // Assert\n    }`).join('\n\n')}\n}`;
        }
        function generatePHP(c, m, cases) {
            return `<?php\nuse PHPUnit\\Framework\\TestCase;\n\nclass ${c}Test extends TestCase {\n${cases.map(i=>`    public function test${toPascal(m)}_${toPascal(i.text)}() {\n        // Arrange\n        $sut = new ${c}();\n        // Act\n        // Assert\n        $this->assertTrue(true);\n    }`).join('\n\n')}\n}`;
        }
        function generatePython(c, m, cases) {
            return `import unittest\n\nclass Test${c}(unittest.TestCase):\n${cases.map(i=>`    def test_${toSnake(m)}_${toSnake(i.text)}(self):\n        # Arrange\n        sut = ${c}()\n        # Act\n        # Assert\n        self.assertTrue(True)`).join('\n\n')}`;
        }
        function generateGo(c, m, cases) {
            return `package main\n\nimport "testing"\n\n${cases.map(i=>`func Test${c}_${toPascal(m)}_${toPascal(i.text)}(t *testing.T) {\n    // Arrange\n    // sut := &${c}{}\n    // Act\n    // Assert\n}`).join('\n\n')}`;
        }

        function updateOutput() {
            if (currentTab === 'meta') return;
            const lang = document.getElementById('language').value;
            const c = document.getElementById('className').value || 'MyClass';
            const m = document.getElementById('methodName').value || 'MyMethod';
            
            let code = "";
            switch(lang) {
                case 'javascript': code = generateJavaScript(c, m, testCases); break;
                case 'csharp': code = generateCSharp(c, m, testCases); break;
                case 'kotlin': code = generateKotlin(c, m, testCases); break;
                case 'typescript': code = generateTypeScript(c, m, testCases); break;
                case 'java': code = generateJava(c, m, testCases); break;
                case 'php': code = generatePHP(c, m, testCases); break;
                case 'python': code = generatePython(c, m, testCases); break;
                case 'go': code = generateGo(c, m, testCases); break;
                default: code = "// Language not supported in visual builder yet.";
            }
            
            const output = document.getElementById('output');
            output.innerHTML = highlightCode(code, lang);
            reHighlight();
        }
        
        function updateLangBadge() {
             document.getElementById('langBadge').textContent = document.getElementById('language').value.toUpperCase();
        }

        // --- UTILS ---
        function copyCode(btn) {
            // Pega apenas o texto puro (sem tags HTML) para copiar
            navigator.clipboard.writeText(document.getElementById('output').textContent);
            if(btn) { const old = btn.innerHTML; btn.innerHTML = "âœ“ Copied"; setTimeout(()=>btn.innerHTML=old, 2000); }
        }
        function downloadCode() {
            const blob = new Blob([document.getElementById('output').textContent], {type: 'text/plain'});
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'tests.txt'; a.click();
        }
        function openModal() { document.getElementById('modal').classList.remove('hidden'); document.getElementById('modal').classList.add('flex'); }
        function closeModal() { document.getElementById('modal').classList.add('hidden'); document.getElementById('modal').classList.remove('flex'); }

        // Init
        renderCases();
        updateOutput();
    </script>
</body>
</html>